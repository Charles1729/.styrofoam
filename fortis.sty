% fortis.sty
%     ____           __  _             __       
%    / __/___  _____/ /_(_)____  _____/ /___  __
%   / /_/ __ \/ ___/ __/ / ___/ / ___/ __/ / / /
%  / __/ /_/ / /  / /_/ (__  ) (__  ) /_/ /_/ / 
% /_/  \____/_/   \__/_/____(_)____/\__/\__, /  
%                                      /____/   
\ProvidesPackage{fortis}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    COLOR                    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[dvipsnames]{xcolor}

\definecolor{subsectioncolor}{HTML}{424242}
\definecolor{probcolor}{HTML}{566bf5}
\definecolor{solcolor}{HTML}{fa493c}
\definecolor{lemcolor}{HTML}{b35d72}
\definecolor{claimcolor}{HTML}{b35d72}
\definecolor{excolor}{HTML}{707070}
\definecolor{defcolor}{HTML}{639492}
\definecolor{thmcolor}{HTML}{11a87b}
\definecolor{exacolor}{HTML}{f58b40}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                   PACKAGES                  %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[utf8]{inputenc}
\usepackage{amsmath, amssymb, amsthm, amsfonts, mathrsfs, calc}
\usepackage{array}
\usepackage{mathtools}
\usepackage[inline]{asymptote}
\usepackage{tikz, tikz-cd, tikzsymbols}
\usetikzlibrary{graphs}

\usepackage{listings}

\usepackage{enumerate}
\usepackage{enumitem}

\usepackage{tcolorbox}
\usepackage{adjustbox}
\usepackage{thmtools}
\usepackage[normalem]{ulem}
\usepackage[framemethod=TikZ]{mdframed}
\tcbuselibrary{skins,breakable}
\tcbset{skin=enhanced}

\usepackage{ifthen}
\usepackage[parfill]{parskip}
\usepackage{etoolbox}
\usepackage[colorlinks]{hyperref}
\usepackage{url}
\urlstyle{tt}
\usepackage{titlesec}

\usepackage{graphicx}
\usepackage{subcaption}

\usepackage[bottom]{footmisc} 
\usepackage[top=0.1in,margin=0.4in]{geometry}
\usepackage{fancyhdr}
\usepackage{changepage}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
    pdftitle={Scrap},
    pdfpagemode=FullScreen,
	citecolor=blue
    }
\usepackage{sectsty}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    FONTS                    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[sc]{mathpazo}
\linespread{1.05}         % Palladio needs more leading (space between lines)
\usepackage[T1]{fontenc}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  PAGE SETUP                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Page Setup: Old non fancyhdr setup.
% \newcommand{\fhead}[1]{\begin{center}\course \\\prof \\\room \\#1\end{center}\vspace{2mm}}

% \newcommand{\ahead}{\begin{center}
% \ifdef{\atitle}{\textsc{\textbf{\begin{Large}\atitle\end{Large} \vspace{0.1cm}}} \\}{} 
% \ifdef{\acourse}{\textsc{\acourse} \\}{}
% \ifdef{\aprof}{\textsc{\aprof} \\}{}
% \ifdef{\aauthor}{\textsc{\aauthor} \\}{}
% \ifdef{\adate}{\textsc{\adate}}{} \end{center}\vspace{5mm}}

% Page Setup: fancyhdr setup
\setlength{\headheight}{0.75in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\headsep}{10pt}
\setlength{\textwidth}{6.5in}
\setlength{\headwidth}{6.5in}
\setlength{\textheight}{9in}
\lhead{\@author}
\rhead{\@title}
\lfoot{}
\cfoot{}
\rfoot{\thepage}

% Page Setup: Redefinition of the \subsection command
% \titleformat{\subsection}{\large\sffamily\bfseries\itshape\color{subsectioncolor}}{}{0pt}{}
\sectionfont{\boldmath}
\subsectionfont{\color{subsectioncolor}\boldmath}
\newcommand{\nrl}{$~$ \newline $~$ \newline}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                MATH COMMANDS                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\T}{\mathcal{T}}
\newcommand{\U}{\mathcal{U}}
\newcommand{\A}{\mathcal{A}}

\newcommand{\Gal}{\text{Gal}}
\newcommand{\supp}{\mathsf{supp}}

% Circles: \arc redefinition
\makeatletter
\DeclareFontFamily{U}{tipa}{}
\DeclareFontShape{U}{tipa}{m}{n}{<->tipa10}{}
\newcommand{\arc@char}{{\usefont{U}{tipa}{m}{n}\symbol{62}}}%
\newcommand{\arc}[1]{\mathpalette\arc@arc{#1}}
\newcommand{\arc@arc}[2]{%
  \sbox0{$\m@th#1#2$}%
  \vbox{
    \hbox{\resizebox{\wd0}{\height}{\arc@char}}
    \nointerlineskip
    \box0
  }%
}
\makeatother

\newcommand{\symsum}{\sum_{\text{sym}}}
\newcommand{\cyc}{\sum_{cyc}}

\newcommand{\eps}{\varepsilon}
\newcommand{\dg}{^\circ}
\newcommand{\dangle}{\measuredangle}
\newcommand{\aline}{\overleftrightarrow}
\newcommand{\ray}{\overrightarrow}
\newcommand{\seg}{\overline}

\newcommand{\p}[1]{\stackrel{#1}{=}}

\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\db}[1]{\left\llbracket #1 \right\rrbracket}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\gen}[1]{\left\langle #1 \right\rangle}

\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\pow}{pow}
\DeclareMathOperator{\rk}{rk}

\renewcommand{\d}[1]{\mathop{\mathrm{d}{#1}}}

\newcommand{\hl}[1]{{\sffamily\bfseries\color{blue}{#1}}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%     LESS ADVANCED ENVIRONMENTS (NORMAL)     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Casework: Environment Definition
\newenvironment{casework}
{
    \begin{adjustwidth}{0.8cm}{}
    \begin{enumerate}[label=Case \arabic*:]
}
{
    \end{enumerate}\end{adjustwidth}
}

% Proofs: Take up less space above.
\renewenvironment{proof}{\begin{adjustwidth}{0.4cm}{}\textit{Proof.}}{$\blacksquare$\end{adjustwidth}}
\newenvironment{solution}{\textit{Solution.}}{\qed\newline}
\newcommand{\remark}{\textbf{Remark. }}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MORE ADVANCED LINE-ENDER ENVIRONMENTS (LEE) %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% LEE: Box Styles
\mdfdefinestyle{probbox} {
	linewidth=1pt, skipabove=3pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=probcolor, nobreak=false
}
\mdfdefinestyle{lembox} {
	linewidth=0.75pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=lemcolor, nobreak=false,
	leftmargin=0.4cm
}
\mdfdefinestyle{claimbox} {
	linewidth=0.75pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=claimcolor, nobreak=false,
	leftmargin=0.4cm
}
\mdfdefinestyle{exbox} {
	linewidth=1pt, skipabove=5pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=excolor, nobreak=false
}
\mdfdefinestyle{defbox} {
	linewidth=1pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=defcolor, nobreak=false
}
\mdfdefinestyle{exabox} {
	linewidth=1pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=exacolor, nobreak=false
}
\mdfdefinestyle{thmbox} {
	linewidth=1pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=thmcolor, nobreak=false
}

\mdfdefinestyle{propbox} {
	linewidth=1pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=black, nobreak=false
}

% LEE: Declarations
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{thmcolor},
	notefont=\sffamily\bfseries\color{thmcolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=thmbox}, headpunct={.},
]{thmstyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{probcolor},
	notefont=\sffamily\bfseries\color{probcolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=probbox}, headpunct={.},
]{probstyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{lemcolor},
	notefont=\sffamily\bfseries\color{lemcolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=lembox}, headpunct={.},
]{lemstyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{claimcolor},
	notefont=\sffamily\bfseries\color{claimcolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=claimbox}, headpunct={.},
]{claimstyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{excolor},
	notefont=\sffamily\bfseries\color{excolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=exbox}, headpunct={.},
]{exstyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{defcolor},
	notefont=\sffamily\bfseries\color{defcolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=defbox}, headpunct={.},
]{defstyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{exacolor},
	notefont=\sffamily\bfseries\color{exacolor},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=exabox}, headpunct={.},
]{exastyle}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{black},
	notefont=\sffamily\bfseries\color{black},
	spaceabove=1pt, spacebelow=1pt,
	mdframed={style=propbox}, headpunct={.},
]{propstyle}


\declaretheorem[style=thmstyle, name=Theorem, numbered=yes, numberwithin=section]{thm}
\declaretheorem[style=probstyle, name=Problem, numbered=no]{problem}
\declaretheorem[style=lemstyle, numbered=no]{lemma}
\declaretheorem[style=claimstyle, name=Claim, numbered=no]{claim}
\declaretheorem[style=exstyle, name=Exercise, numbered=yes]{exercise}
\declaretheorem[style=defstyle, name=Definition, name=Definition, numbered=yes, numberlike=thm]{definition}
\declaretheorem[style=exastyle, name=Example, name=Example, numbered=no]{example}
\declaretheorem[style=propstyle, name=Proposition, name=Proposition, numbered=yes, numberlike=thm]{prop}

% Theorem
\let\oldthm\thm
\let\oldendthm\endthm
\renewenvironment{thm}
  {\vspace{0.5\baselineskip}\oldthm}
  {\oldendthm\vspace{-0.5\baselineskip}}

% Problem
\let\oldproblem\problem
\let\oldendproblem\endproblem
\renewenvironment{problem}
  {\vspace{0.5\baselineskip}\oldproblem}
  {\oldendproblem\vspace{-0.5\baselineskip}}

% Lemma
\let\oldlemma\lemma
\let\oldendlemma\endlemma
\renewenvironment{lemma}
  {\vspace{0.5\baselineskip}\oldlemma}
  {\oldendlemma\vspace{-0.5\baselineskip}}

% Claim
\let\oldclaim\claim
\let\oldendclaim\endclaim
\renewenvironment{claim}
  {\vspace{0.5\baselineskip}\oldclaim}
  {\oldendclaim\vspace{-0.5\baselineskip}}

% Exercise
\let\oldexercise\exercise
\let\oldendexercise\endexercise
\renewenvironment{exercise}
  {\vspace{0.5\baselineskip}\oldexercise}
  {\oldendexercise\vspace{-0.5\baselineskip}}

% Definition
\let\olddef\definition
\let\oldenddef\enddefinition
\renewenvironment{definition}
  {\vspace{0.5\baselineskip}\olddef}
  {\oldenddef\vspace{-0.5\baselineskip}}

% Example
\let\oldexa\example
\let\oldendexa\endexample
\renewenvironment{example}
  {\vspace{0.5\baselineskip}\oldexa}
  {\oldendexa\vspace{-0.5\baselineskip}}

% Proposition
\let\oldprop\prop
\let\oldendprop\endprop
\renewenvironment{prop}
  {\vspace{0.5\baselineskip}\oldprop}
  {\oldendprop\vspace{-0.5\baselineskip}}
