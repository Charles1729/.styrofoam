% fortis.sty
%     ____           __  _             __       
%    / __/___  _____/ /_(_)____  _____/ /___  __
%   / /_/ __ \/ ___/ __/ / ___/ / ___/ __/ / / /
%  / __/ /_/ / /  / /_/ (__  ) (__  ) /_/ /_/ / 
% /_/  \____/_/   \__/_/____(_)____/\__/\__, /  
%                                      /____/   
\ProvidesPackage{fortis}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                   PACKAGES                  %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Packages %

% Packages: xcolor is at the very top because 
% one of enumitem or enumerate re-installs it
% *without* dvipsnames which is horrid
\usepackage[dvipsnames]{xcolor}

% Packages: Math
\usepackage[utf8]{inputenc}
\usepackage{amsmath, amssymb, amsthm, amsfonts, calc}
\usepackage{array}
\usepackage{mathtools}
\usepackage[inline]{asymptote}
\usepackage{tikz, tikz-cd, tikzsymbols}
\usetikzlibrary{graphs}

% Packages: Code
\usepackage{listings}

% Packages: Enumeration
\usepackage{enumerate}
\usepackage{enumitem}

% Packages: Theorems
\usepackage{color}
\usepackage{tcolorbox}
\usepackage{adjustbox}
\usepackage{thmtools}
\usepackage[normalem]{ulem}
\usepackage[framemethod=TikZ]{mdframed}
\tcbuselibrary{skins,breakable}
\tcbset{skin=enhanced}

% Packages: File Changers
\usepackage{ifthen}
\usepackage[parfill]{parskip}
\usepackage{etoolbox}
\usepackage[colorlinks]{hyperref}
\usepackage{url}
\urlstyle{tt}
\usepackage{titlesec}
\usepackage{lipsum}
% Commands to make LaTeX quotes less jank
% \usepackage [autostyle, english = american]{csquotes}
% \MakeOuterQuote{"}

% Packages: Images
\usepackage{graphicx}
\usepackage{subcaption}
% Command if I ever want to put images in a separate folder
% \graphicspath{ {./img/} }

% Packages: Setup
\usepackage[bottom]{footmisc} 
\usepackage[top=0.6in,margin=0.4in]{geometry}
\usepackage{fancyhdr}
\usepackage{changepage}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
    pdftitle={Overleaf Example},
    pdfpagemode=FullScreen,
    }



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                    FONTS                    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% stolen directly from fluffy_full.sty sorry

% for bold + smallcapps font...?
\usepackage{fix-cm}
\usepackage[T1]{fontenc} % To switch to the T1 encoding
\usepackage{lmodern} % To switch to Latin Modern
\rmfamily % To load Latin Modern Roman and enable the following NFSS declarations.
% Declare that Latin Modern Roman (lmr) should take
% its bold (b) and bold extended (bx) weight, and small capital (sc) shape, 
% from the corresponding Computer Modern Roman (cmr) font, for the T1 font encoding.
\DeclareFontShape{T1}{lmr}{b}{sc}{<->ssub*cmr/bx/sc}{}
\DeclareFontShape{T1}{lmr}{bx}{sc}{<->ssub*cmr/bx/sc}{}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                  PAGE SETUP                 %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Page Setup: Old non fancyhdr setup.
% \newcommand{\fhead}[1]{\begin{center}\course \\\prof \\\room \\#1\end{center}\vspace{2mm}}

% \newcommand{\ahead}{\begin{center}
% \ifdef{\atitle}{\textsc{\textbf{\begin{Large}\atitle\end{Large} \vspace{0.1cm}}} \\}{} 
% \ifdef{\acourse}{\textsc{\acourse} \\}{}
% \ifdef{\aprof}{\textsc{\aprof} \\}{}
% \ifdef{\aauthor}{\textsc{\aauthor} \\}{}
% \ifdef{\adate}{\textsc{\adate}}{} \end{center}\vspace{5mm}}

% Page Setup: fancyhdr setup
\setlength{\headheight}{0.75in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\headsep}{10pt}
\setlength{\textwidth}{6.5in}
\setlength{\headwidth}{6.5in}
\setlength{\textheight}{9in}
\lhead{\@author}
\chead{}
\rhead{\@title}
\lfoot{}
\cfoot{}
\rfoot{\thepage}

% Page Setup: Line after for sections
% \newcommand{\hruleafter}[1]{#1\hrule}

% Page Setup: Redefinition of the \section command
\titleformat{\section}{\Large\bfseries}{\thesection}{0em}{}
\setcounter{secnumdepth}{0}
\titleformat{\subsection}{\large\bfseries}{\thesubsection}{0pt}{}

% Page Setup: Removing absurd space
% \titlespacing{\section}{0pt}{\parskip}{-\parskip}

% Page Setup: manual doublespace, use only when necessary
% Use 2 line breaks normally.
\newcommand{\nrl}{$~$ \newline $~$ \newline}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                MATH COMMANDS                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Math: Sets of numbers shorthand
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\T}{\mathcal{T}}

% Math: Galois group shorthand
\newcommand{\Gal}{\text{Gal}}

% Circles: \arc redefinition
\makeatletter
\DeclareFontFamily{U}{tipa}{}
\DeclareFontShape{U}{tipa}{m}{n}{<->tipa10}{}
\newcommand{\arc@char}{{\usefont{U}{tipa}{m}{n}\symbol{62}}}%
\newcommand{\arc}[1]{\mathpalette\arc@arc{#1}}
\newcommand{\arc@arc}[2]{%
  \sbox0{$\m@th#1#2$}%
  \vbox{
    \hbox{\resizebox{\wd0}{\height}{\arc@char}}
    \nointerlineskip
    \box0
  }%
}
\makeatother

% Sums: symmetric and cyclic
\newcommand{\symsum}{\sum_{\text{sym}}}
\newcommand{\cyc}{\sum_{cyc}}

% Shorthands: varepsilon, degrees, directed angles, lines, rays, segments, and vectors
\newcommand{\eps}{\varepsilon}
\newcommand{\dg}{^\circ}
\newcommand{\dangle}{\measuredangle}
\newcommand{\aline}{\overleftrightarrow}
\newcommand{\ray}{\overrightarrow}
\newcommand{\seg}{\overline}

% Shorthands: Perspectivity
\newcommand{\p}[1]{\stackrel{#1}{=}}

% Wraparound Commands: floor, ceiling, absolute value, and magnitude (norm)
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}

% Text Commands: cis, lcm, diam, rank, pow and rk
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\pow}{pow}
\DeclareMathOperator{\rk}{rk}

% Integrals: dx
\renewcommand{\d}[1]{\mathop{\mathrm{d}{#1}}}

% Highlights
\newcommand{\hl}[1]{{\sffamily\bfseries\color{blue}{#1}}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%     LESS ADVANCED ENVIRONMENTS (NORMAL)     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Casework: Environment Definition
\newenvironment{casework}
{
    \begin{adjustwidth}{0.8cm}{}
    \begin{enumerate}[label=Case \arabic*:]
}
{
    \end{enumerate}\end{adjustwidth}
}

% Proofs: Take up less space above.
\renewenvironment{proof}{\begin{adjustwidth}{0.4cm}{}\textit{Proof.}}{$\blacksquare$\end{adjustwidth}}
\newenvironment{solution}{\textit{Solution.}}{\qed}
\newcommand{\remark}{\textbf{Remark. }}

% Outlines.
\definecolor{archcolor}{HTML}{fa753c}
\definecolor{clubcolor}{HTML}{1eaac9}
\newcommand{\outline}[2]{{\sffamily\bfseries\color{archcolor}\textbf{#1}}
{\color{clubcolor}\textbf{(#2$\clubsuit$)}} }

% \newcommand{\outline}[2]{
%   {\sffamily\bfseries\color{archcolor}\textbf{#1}}{\color{clubcolor}\textbf{ [#2$\clubsuit$] }}\item}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% MORE ADVANCED LINE-ENDER ENVIRONMENTS (LEE) %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Stolen from fluffy (sorry)

% LEE: Colors
\definecolor{probcolor}{HTML}{566bf5}
\definecolor{solcolor}{HTML}{fa493c}
\definecolor{lemcolor}{HTML}{b35d72}
\definecolor{claimcolor}{HTML}{b35d72}
\definecolor{excolor}{HTML}{707070}
\definecolor{defcolor}{HTML}{000000}
\definecolor{thmcolor}{HTML}{11a87b}

% LEE: Box Styles
\mdfdefinestyle{probbox} {
	linewidth=1pt, skipabove=3pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=probcolor, nobreak=false
}
% \mdfdefinestyle{solbox} {
% 	linewidth=1.75pt, skipabove=4pt,
% 	rightline=false, leftline=true,
% 	topline=false, bottomline=false,
% 	linecolor=solcolor, nobreak=false
% }
\mdfdefinestyle{lembox} {
	linewidth=0.5pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=lemcolor, nobreak=false
}
\mdfdefinestyle{claimbox} {
	linewidth=1.75pt, skipabove=0pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=claimcolor, nobreak=false
}
\mdfdefinestyle{exbox} {
	linewidth=1pt, skipabove=5pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=excolor, nobreak=false
}
\mdfdefinestyle{defbox} {
	linewidth=1.75pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=defcolor, nobreak=false
}
\mdfdefinestyle{thmbox} {
	linewidth=1.75pt, skipabove=4pt,
	rightline=false, leftline=true,
	topline=false, bottomline=false,
	linecolor=thmcolor, nobreak=false
}

% LEE: Declarations
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{probcolor},
	notefont=\sffamily\bfseries\color{probcolor},
	spaceabove=0pt, spacebelow=0pt,
	mdframed={style=probbox}, headpunct={:},
]{probstyle}
\declaretheorem[style=probstyle, name=Problem, numbered=yes]{problem}
% \declaretheoremstyle[
% 	headfont=\sffamily\bfseries\color{solcolor},
% 	notefont=\sffamily\bfseries\color{solcolor},
% 	spaceabove=0pt, spacebelow=0pt,
% 	mdframed={style=solbox}, headpunct={:},
% ]{solstyle}
% \declaretheorem[style=solstyle, name=Solution, numbered=yes]{solution}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{lemcolor},
	notefont=\sffamily\bfseries\color{lemcolor},
	spaceabove=0pt, spacebelow=0pt,
	mdframed={style=lembox}, headpunct={:},
]{lemstyle}
\declaretheorem[style=lemstyle, name=Lemma, numbered=no]{lemma}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{claimcolor},
	notefont=\sffamily\bfseries\color{claimcolor},
	spaceabove=0pt, spacebelow=0pt,
	mdframed={style=claimbox}, headpunct={:},
]{claimstyle}
\declaretheorem[style=claimstyle, name=Claim, numbered=no]{claim}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{excolor},
	notefont=\sffamily\bfseries\color{excolor},
	spaceabove=0pt, spacebelow=0pt,
	mdframed={style=exbox}, headpunct={:},
]{exstyle}
\declaretheorem[style=exstyle, name=Exercise, numbered=yes]{exercise}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{defcolor},
	notefont=\sffamily\bfseries\color{defcolor},
	spaceabove=0pt, spacebelow=-\parskip,
	mdframed={style=defbox}, headpunct={:},
]{defstyle}
\declaretheorem[style=defstyle, name=Definition, numbered=yes]{definition}
\declaretheoremstyle[
	headfont=\sffamily\bfseries\color{thmcolor},
	notefont=\sffamily\bfseries\color{thmcolor},
	spaceabove=0pt, spacebelow=-\parskip,
	mdframed={style=thmbox}, headpunct={:},
]{thmstyle}
\declaretheorem[style=thmstyle, name=Theorem, numbered=yes]{thm}